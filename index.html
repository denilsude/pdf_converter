<!DOCTYPE html>
<html lang="pt-BR" class="dark">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Conversor | Credseguro</title>
  
  <link rel="icon" type="image/png" href="img/logo_fav.png">
  <link rel="manifest" href="site.webmanifest">

  <script src="js/tailwindcss.js"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          colors: {}
        }
      }
    }
  </script>
  <style>
    .botao-ativo {
      background-color: #054c08 !important;
      color: white !important;
    }
    .loader {
      border: 4px solid #f3f3f3;
      border-top: 4px solid #3498db;
      border-radius: 50%;
      width: 24px;
      height: 24px;
      animation: spin 2s linear infinite;
      display: inline-block;
      vertical-align: middle;
      margin-right: 8px;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.min.js"></script>
  <script src="js/pica.min.js"></script>
  <script src="js/jspdf.umd.min.js"></script>
  <script src="js/jszip.min.js"></script>
  <script src="js/FileSaver.min.js"></script>
  <script src="js/pdf-lib.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
</head>

<body class="bg-teal-950 text-white min-h-screen p-6">
  <div class="flex justify-center mb-6">
    <img src="img/logo.png" alt="Logo" class="h-40 cursor-pointer" onclick="location.reload()"
      onmouseenter="this.src='img/logo-hover.png'" onmouseleave="this.src='img/logo.png'">
  </div>
  <br><br><br>
  
  <div class="max-w-4xl mx-auto">
    <h1 class="text-center text-xl font-medium mb-6">Selecione a opção desejada:</h1>
    <br>
    <div id="botoesFormularios" class="flex justify-center gap-4 mb-6 flex-wrap">
      <button onclick="mostrarFormulario('imgToPdf', this)" class="px-4 py-2 bg-green-600 rounded hover:bg-blue-500 transition">Imagem → PDF</button>
      <button onclick="mostrarFormulario('pdfToImg', this)" class="px-4 py-2 bg-green-600 rounded hover:bg-purple-500 transition">PDF → Imagem</button>
      <button onclick="mostrarFormulario('compressPdf', this)" class="px-4 py-2 bg-green-600 rounded hover:bg-red-500 transition">Comprimir PDF</button>
      <button onclick="mostrarFormulario('juntarpdf', this)" class="px-4 py-2 bg-green-600 rounded hover:bg-pink-500 transition">Juntar PDFs</button>
      <button onclick="mostrarFormulario('splitPdf', this)" class="px-4 py-2 bg-green-600 rounded hover:bg-yellow-500 transition">Dividir PDF</button>
      <button onclick="mostrarFormulario('ocrImage' , this)" class="px-4 py-2 bg-green-600 rounded hover:bg-indigo-500 transition">Imagem → Texto</button>
    </div>

    <div id="statusMessage" class="hidden mb-4 p-4 rounded bg-blue-800 text-center"></div>

    <div id="imgToPdf" class="hidden">
      <div id="imgDrop" onclick="document.getElementById('imgInputIPP').click()" ondrop="handleFileDropIPP(event, 'imgInputIPP')" ondragover="allowDropIPP(event)" class="border-2 border-dashed border-blue-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-800 transition">
        <p>Arraste uma ou mais imagens aqui ou clique para selecionar</p>
        <input type="file" accept="image/*" id="imgInputIPP" class="hidden" multiple onchange="previewFileIPP(event, 'imgPreviewIPP')" />
      </div>
      <div id="imgPreviewIPP" class="mt-4 flex flex-wrap gap-4"></div>
      <div class="flex gap-2 mt-4 text-sm">
        <button onclick="setImgPreset('alta')" class="flex-1 bg-green-700 hover:bg-green-600 px-2 py-1 rounded">Alta qualidade</button>
        <button onclick="setImgPreset('equilibrado')" class="flex-1 bg-blue-700 hover:bg-blue-600 px-2 py-1 rounded">Equilibrado</button>
        <button onclick="setImgPreset('compacto')" class="flex-1 bg-yellow-700 hover:bg-yellow-600 px-2 py-1 rounded">Compacto</button>
      </div>
      <label for="imgQuality" class="block mt-4">Qualidade (JPEG):</label>
      <input type="range" min="0.1" max="1" step="0.1" value="0.9" id="imgQuality" class="w-full">
      <label for="imgScale" class="block mt-2">Redução de Tamanho (%):</label>
      <input type="range" min="30" max="100" step="10" value="95" id="imgScale" class="w-full">
      <label for="pdfName" class="block mt-4">Nome do arquivo PDF (opcional):</label>
      <input id="pdfName" type="text" placeholder="Arquivo..." class="w-full p-2 mt-1 rounded bg-gray-800 border border-gray-600 text-white">
      <button onclick="converterImagensParaPDF()" class="mt-4 w-full bg-green-600 hover:bg-green-500 text-white py-2 rounded transition">Converter e Baixar PDF</button>
    </div>

    <div id="pdfToImg" class="hidden">
      <div id="pdfDrop" onclick="document.getElementById('pdfInput').click()" ondrop="handleFileDrop(event, 'pdfInput')" ondragover="allowDrop(event)" class="border-2 border-dashed border-purple-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-800 transition">
        <p>Arraste um PDF aqui ou clique para selecionar</p>
        <input type="file" accept="application/pdf" id="pdfInput" class="hidden" onchange="previewFile(event, 'pdfPreview')" />
      </div>
      <div id="pdfPreview" class="mt-4"></div>
      <div class="flex gap-2 mt-4 text-sm">
        <button onclick="setPreset('alta')" class="flex-1 bg-green-700 hover:bg-green-600 px-2 py-1 rounded">Alta qualidade</button>
        <button onclick="setPreset('equilibrado')" class="flex-1 bg-blue-700 hover:bg-blue-600 px-2 py-1 rounded">Equilibrado</button>
        <button onclick="setPreset('compacto')" class="flex-1 bg-yellow-700 hover:bg-yellow-600 px-2 py-1 rounded">Compacto</button>
      </div>
      <label for="pdfImgQuality" class="block mt-4">Qualidade (JPEG):</label>
      <input type="range" id="pdfImgQuality" min="0.1" max="1" step="0.1" value="0.7" class="w-full">
      <label for="pdfImgScale" class="block mt-2">Redução de Tamanho (%):</label>
      <input type="range" id="pdfImgScale" min="30" max="100" step="10" value="70" class="w-full">
      <label for="imgZipName" class="block mt-4">Nome base para as imagens (opcional):</label>
      <input id="imgZipName" type="text" placeholder="Página" class="w-full p-2 mt-1 rounded bg-gray-800 border border-gray-600 text-white">
      <button onclick="converterPDFparaImagem()" class="mt-4 w-full bg-yellow-600 hover:bg-yellow-500 text-white py-2 rounded transition">Converter PDF para Imagem</button>
      <div class="flex gap-2 mt-4">
        <button onclick="baixarTodasImagens()" class="flex-1 bg-blue-600 hover:bg-blue-500 text-white py-2 rounded transition">Baixar Tudo (ZIP)</button>
        <button onclick="document.getElementById('outputCanvas').innerHTML = ''" class="flex-1 bg-red-600 hover:bg-red-500 text-white py-2 rounded transition">Limpar Tudo</button>
      </div>
      <div id="outputCanvas" class="mt-6 space-y-4"></div>
    </div>

    <div id="juntarpdf" class="hidden">
      <div onclick="document.getElementById('pdfFiles').click()" ondragover="event.preventDefault()" ondrop="handleDrop(event)" class="border-2 border-dashed border-pink-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-800 transition">
        <p>Arraste dois ou mais PDFs aqui ou clique para selecionar</p>
        <input type="file" multiple accept="application/pdf" id="pdfFiles" style="display:none" onchange="handleFiles(this.files)">
      </div>
      <ul id="fileList" class="mt-4 space-y-2"></ul>
      <label for="fileNameInput" class="block mt-4">Nome do PDF final (opcional):</label>
      <input id="fileNameInput" type="text" placeholder="juntado" class="w-full p-2 mt-1 rounded bg-gray-800 border border-gray-600 text-white">
      <button onclick="mergePDFs()" class="mt-4 w-full bg-pink-600 hover:bg-pink-500 text-white py-2 rounded transition">Juntar e Baixar PDF</button>
    </div>

    <div id="compressPdf" class="hidden">
      <div onclick="document.getElementById('compressInput').click()" ondrop="handleFileDrop(event, 'compressInput')" ondragover="allowDrop(event)" class="border-2 border-dashed border-red-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-800 transition">
        <p>Arraste um ou mais PDFs aqui ou clique para selecionar</p>
        <input type="file" accept="application/pdf" id="compressInput" class="hidden" multiple />
      </div>
      
      <div class="mt-4 p-4 bg-gray-800 rounded">
        <p class="text-sm text-yellow-400 mb-2">ℹ️ <strong>Nota:</strong> A compressão é automática para melhor desempenho.</p>
        <label for="compressedName" class="block mt-2">Nome do PDF Comprimido (Opcional):</label>
        <input id="compressedName" type="text" placeholder="comprimido" class="w-full p-2 mt-1 rounded bg-gray-700 border border-gray-600 text-white">
      </div>

      <button onclick="comprimirPDF()" id="btnCompress" class="mt-4 w-full bg-red-600 hover:bg-red-500 text-white py-2 rounded transition font-bold">
        Comprimir e Baixar
      </button>
    </div>

    <div id="splitPdf" class="hidden">
      <div onclick="document.getElementById('splitInput').click()" ondrop="handleFileDrop(event, 'splitInput')" ondragover="allowDrop(event)" class="border-2 border-dashed border-orange-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-800 transition">
        <p>Arraste um PDF aqui ou clique para selecionar</p>
        <input type="file" accept="application/pdf" id="splitInput" class="hidden" onchange="previewFile(event, 'splitPreview')" />
      </div>
      <div id="splitPreview" class="mt-4"></div>
      <label for="splitPages" class="block mt-4">Páginas a extrair (ex: 1,3,5-7):</label>
      <input id="splitPages" type="text" placeholder="1,3,5-7" class="w-full p-2 mt-1 rounded bg-gray-800 border border-gray-600 text-white">
      <label for="splitBaseName" class="block mt-4">Nome base para os arquivos (opcional):</label>
      <input id="splitBaseName" type="text" placeholder="pagina" class="w-full p-2 mt-1 rounded bg-gray-800 border border-gray-600 text-white">
      <button onclick="dividirPDF()" class="mt-4 w-full bg-orange-600 hover:bg-orange-500 text-white py-2 rounded transition">Dividir e Baixar ZIP</button>
    </div>

    <div id="ocrImage" class="hidden">
      <div onclick="document.getElementById('ocrInput').click()" ondrop="handleFileDrop(event, 'ocrInput')" ondragover="allowDrop(event)" class="border-2 border-dashed border-indigo-400 p-6 rounded-lg text-center cursor-pointer hover:bg-gray-800 transition">
        <p>Arraste uma imagem aqui ou clique para selecionar</p>
        <input type="file" accept="image/*" id="ocrInput" class="hidden" onchange="previewOcrFile(event)" />
      </div>
      <div id="ocrPreview" class="mt-4"></div>
      <button onclick="extrairTextoImagem()" class="mt-4 w-full bg-indigo-600 hover:bg-indigo-500 text-white py-2 rounded transition">Extrair Texto</button>
      <textarea id="ocrResult" rows="8" class="mt-4 w-full p-2 rounded bg-gray-800 border border-gray-600 text-white" placeholder="O texto extraído aparecerá aqui..."></textarea>
    </div>
  </div>

  <script src="js/main.js"></script>
</body>
</html>